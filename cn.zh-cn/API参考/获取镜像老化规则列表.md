# 获取镜像老化规则列表<a name="swr_02_0053"></a>

## 功能介绍<a name="se03aae4436e64394a95dc13b6f233898"></a>

获取镜像老化规则列表。

## 调试<a name="section85822133314"></a>

您可以在[API Explorer](https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=SWR&api=ListRetentions)中直接运行调试该接口。

## URI<a name="s476df674307e4b04b9545f9575dde042"></a>

GET /v2/manage/namespaces/\{namespace\}/repos/\{repository\}/retentions

参数说明请参见[表1](#tae82a09e27434bef9a38b734d798ae6c)。

**表 1**  参数说明

<a name="tae82a09e27434bef9a38b734d798ae6c"></a>
<table><thead align="left"><tr id="r2c22eba22439445680961f8c447f8756"><th class="cellrowborder" valign="top" width="17.1%" id="mcps1.2.5.1.1"><p id="a4276374f4f884a1a8ff6eabdab4da030"><a name="a4276374f4f884a1a8ff6eabdab4da030"></a><a name="a4276374f4f884a1a8ff6eabdab4da030"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="15.6%" id="mcps1.2.5.1.2"><p id="p1351382513427"><a name="p1351382513427"></a><a name="p1351382513427"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="16.439999999999998%" id="mcps1.2.5.1.3"><p id="p1781316754219"><a name="p1781316754219"></a><a name="p1781316754219"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="50.86000000000001%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0060210625_p192541611508"><a name="zh-cn_topic_0060210625_p192541611508"></a><a name="zh-cn_topic_0060210625_p192541611508"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row4140165617213"><td class="cellrowborder" valign="top" width="17.1%" headers="mcps1.2.5.1.1 "><p id="p0601928131816"><a name="p0601928131816"></a><a name="p0601928131816"></a>namespace</p>
</td>
<td class="cellrowborder" valign="top" width="15.6%" headers="mcps1.2.5.1.2 "><p id="p10507114164313"><a name="p10507114164313"></a><a name="p10507114164313"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="16.439999999999998%" headers="mcps1.2.5.1.3 "><p id="p105058419438"><a name="p105058419438"></a><a name="p105058419438"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.86000000000001%" headers="mcps1.2.5.1.4 "><p id="p11460935127"><a name="p11460935127"></a><a name="p11460935127"></a>组织名称</p>
</td>
</tr>
<tr id="row16478735132515"><td class="cellrowborder" valign="top" width="17.1%" headers="mcps1.2.5.1.1 "><p id="p206018288188"><a name="p206018288188"></a><a name="p206018288188"></a>repository</p>
</td>
<td class="cellrowborder" valign="top" width="15.6%" headers="mcps1.2.5.1.2 "><p id="p18920840134520"><a name="p18920840134520"></a><a name="p18920840134520"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="16.439999999999998%" headers="mcps1.2.5.1.3 "><p id="p391915406456"><a name="p391915406456"></a><a name="p391915406456"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="50.86000000000001%" headers="mcps1.2.5.1.4 "><p id="p1871615462812"><a name="p1871615462812"></a><a name="p1871615462812"></a>镜像仓库名称</p>
</td>
</tr>
</tbody>
</table>

## 请求消息<a name="section141782462587"></a>

-   请求参数

    无

-   请求样例

    ```
    GET https://{Endpoint}/v2/manage/namespaces/group/repos/busybox/retentions
    ```


## 响应消息<a name="sab9be5ce850743859bb238e072f8d1f2"></a>

-   响应参数

    **表 2**  Response Body参数说明

    <a name="table12258102419201"></a>
    <table><thead align="left"><tr id="row02581924192018"><th class="cellrowborder" valign="top" width="20.89%" id="mcps1.2.4.1.1"><p id="p325872412010"><a name="p325872412010"></a><a name="p325872412010"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="21.78%" id="mcps1.2.4.1.2"><p id="p825822492018"><a name="p825822492018"></a><a name="p825822492018"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="57.330000000000005%" id="mcps1.2.4.1.3"><p id="p1725818245205"><a name="p1725818245205"></a><a name="p1725818245205"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row19258162413209"><td class="cellrowborder" valign="top" width="20.89%" headers="mcps1.2.4.1.1 "><p id="p52581524102019"><a name="p52581524102019"></a><a name="p52581524102019"></a><em id="i16401119182119"><a name="i16401119182119"></a><a name="i16401119182119"></a>[数组元素]</em></p>
    </td>
    <td class="cellrowborder" valign="top" width="21.78%" headers="mcps1.2.4.1.2 "><p id="p132588243209"><a name="p132588243209"></a><a name="p132588243209"></a>Array of <a href="#table34001413863">objects</a></p>
    </td>
    <td class="cellrowborder" valign="top" width="57.330000000000005%" headers="mcps1.2.4.1.3 "><p id="p132586249205"><a name="p132586249205"></a><a name="p132586249205"></a>镜像老化规则列表</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 3** _\[数组元素\]_参数说明

    <a name="table34001413863"></a>
    <table><thead align="left"><tr id="row17400171319612"><th class="cellrowborder" valign="top" width="20.89%" id="mcps1.2.4.1.1"><p id="p1840015139619"><a name="p1840015139619"></a><a name="p1840015139619"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="21.78%" id="mcps1.2.4.1.2"><p id="p24002135620"><a name="p24002135620"></a><a name="p24002135620"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="57.330000000000005%" id="mcps1.2.4.1.3"><p id="p174008131163"><a name="p174008131163"></a><a name="p174008131163"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row112018033016"><td class="cellrowborder" valign="top" width="20.89%" headers="mcps1.2.4.1.1 "><p id="p1820170123016"><a name="p1820170123016"></a><a name="p1820170123016"></a>algorithm</p>
    </td>
    <td class="cellrowborder" valign="top" width="21.78%" headers="mcps1.2.4.1.2 "><p id="p1120110113016"><a name="p1120110113016"></a><a name="p1120110113016"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.330000000000005%" headers="mcps1.2.4.1.3 "><p id="p19201120163015"><a name="p19201120163015"></a><a name="p19201120163015"></a>回收规则匹配策略，固定为"or"。</p>
    </td>
    </tr>
    <tr id="row463823183116"><td class="cellrowborder" valign="top" width="20.89%" headers="mcps1.2.4.1.1 "><p id="p1482131117588"><a name="p1482131117588"></a><a name="p1482131117588"></a>id</p>
    </td>
    <td class="cellrowborder" valign="top" width="21.78%" headers="mcps1.2.4.1.2 "><p id="p88201811175811"><a name="p88201811175811"></a><a name="p88201811175811"></a>Integer</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.330000000000005%" headers="mcps1.2.4.1.3 "><p id="p181911115588"><a name="p181911115588"></a><a name="p181911115588"></a>规则ID</p>
    </td>
    </tr>
    <tr id="row1050611711305"><td class="cellrowborder" valign="top" width="20.89%" headers="mcps1.2.4.1.1 "><p id="p2506974303"><a name="p2506974303"></a><a name="p2506974303"></a>rules</p>
    </td>
    <td class="cellrowborder" valign="top" width="21.78%" headers="mcps1.2.4.1.2 "><p id="p750714718301"><a name="p750714718301"></a><a name="p750714718301"></a>Array of <a href="#table42181229202417">objects</a></p>
    </td>
    <td class="cellrowborder" valign="top" width="57.330000000000005%" headers="mcps1.2.4.1.3 "><p id="p650747193012"><a name="p650747193012"></a><a name="p650747193012"></a>镜像老化规则</p>
    </td>
    </tr>
    <tr id="row12376752303"><td class="cellrowborder" valign="top" width="20.89%" headers="mcps1.2.4.1.1 "><p id="p537619543012"><a name="p537619543012"></a><a name="p537619543012"></a>scope</p>
    </td>
    <td class="cellrowborder" valign="top" width="21.78%" headers="mcps1.2.4.1.2 "><p id="p1437655113015"><a name="p1437655113015"></a><a name="p1437655113015"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.330000000000005%" headers="mcps1.2.4.1.3 "><p id="p15376957304"><a name="p15376957304"></a><a name="p15376957304"></a>保留字段</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 4**  rules参数说明

    <a name="table42181229202417"></a>
    <table><thead align="left"><tr id="swr_02_0025_row1501125675217"><th class="cellrowborder" valign="top" width="20.3%" id="mcps1.2.4.1.1"><p id="swr_02_0025_p1950115675213"><a name="swr_02_0025_p1950115675213"></a><a name="swr_02_0025_p1950115675213"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="22.64%" id="mcps1.2.4.1.2"><p id="swr_02_0025_p13501956195215"><a name="swr_02_0025_p13501956195215"></a><a name="swr_02_0025_p13501956195215"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="57.06%" id="mcps1.2.4.1.3"><p id="swr_02_0025_p05011356105212"><a name="swr_02_0025_p05011356105212"></a><a name="swr_02_0025_p05011356105212"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row12820312172413"><td class="cellrowborder" valign="top" width="20.3%" headers="mcps1.2.4.1.1 "><p id="swr_02_0025_p175011256195216"><a name="swr_02_0025_p175011256195216"></a><a name="swr_02_0025_p175011256195216"></a>template</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.64%" headers="mcps1.2.4.1.2 "><p id="swr_02_0025_p15016563526"><a name="swr_02_0025_p15016563526"></a><a name="swr_02_0025_p15016563526"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.06%" headers="mcps1.2.4.1.3 "><p id="swr_02_0025_p1750165635213"><a name="swr_02_0025_p1750165635213"></a><a name="swr_02_0025_p1750165635213"></a>老化规则类型，date_rule（存活时间）、tag_rule（版本数目）</p>
    </td>
    </tr>
    <tr id="swr_02_0025_row1850165616523"><td class="cellrowborder" valign="top" width="20.3%" headers="mcps1.2.4.1.1 "><p id="swr_02_0025_p1250115614527"><a name="swr_02_0025_p1250115614527"></a><a name="swr_02_0025_p1250115614527"></a>params</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.64%" headers="mcps1.2.4.1.2 "><p id="swr_02_0025_p1250125625217"><a name="swr_02_0025_p1250125625217"></a><a name="swr_02_0025_p1250125625217"></a>Object</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.06%" headers="mcps1.2.4.1.3 "><a name="ul149031021391"></a><a name="ul149031021391"></a><ul id="ul149031021391"><li>template是date_rule时，params为{"days": "xxx"}</li><li>template是tag_rule时，params为{"num": "xxx"}</li></ul>
    </td>
    </tr>
    <tr id="swr_02_0025_row163821337175510"><td class="cellrowborder" valign="top" width="20.3%" headers="mcps1.2.4.1.1 "><p id="swr_02_0025_p4382163717558"><a name="swr_02_0025_p4382163717558"></a><a name="swr_02_0025_p4382163717558"></a>tag_selectors</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.64%" headers="mcps1.2.4.1.2 "><p id="swr_02_0025_p15382183717558"><a name="swr_02_0025_p15382183717558"></a><a name="swr_02_0025_p15382183717558"></a>Array of <a href="#table147018428247">objects</a></p>
    </td>
    <td class="cellrowborder" valign="top" width="57.06%" headers="mcps1.2.4.1.3 "><p id="swr_02_0025_p2382183716556"><a name="swr_02_0025_p2382183716556"></a><a name="swr_02_0025_p2382183716556"></a>例外镜像</p>
    </td>
    </tr>
    </tbody>
    </table>

    **表 5**  tag\_selectors参数说明

    <a name="table147018428247"></a>
    <table><thead align="left"><tr id="swr_02_0025_row155921317562"><th class="cellrowborder" valign="top" width="20.447955204479552%" id="mcps1.2.4.1.1"><p id="swr_02_0025_p1459151310562"><a name="swr_02_0025_p1459151310562"></a><a name="swr_02_0025_p1459151310562"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="22.4977502249775%" id="mcps1.2.4.1.2"><p id="swr_02_0025_p1759151325619"><a name="swr_02_0025_p1759151325619"></a><a name="swr_02_0025_p1759151325619"></a>参数类型</p>
    </th>
    <th class="cellrowborder" valign="top" width="57.05429457054294%" id="mcps1.2.4.1.3"><p id="swr_02_0025_p195911138561"><a name="swr_02_0025_p195911138561"></a><a name="swr_02_0025_p195911138561"></a>描述</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="swr_02_0025_row85915132566"><td class="cellrowborder" valign="top" width="20.447955204479552%" headers="mcps1.2.4.1.1 "><p id="swr_02_0025_p459813205616"><a name="swr_02_0025_p459813205616"></a><a name="swr_02_0025_p459813205616"></a>kind</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.4977502249775%" headers="mcps1.2.4.1.2 "><p id="swr_02_0025_p145914135569"><a name="swr_02_0025_p145914135569"></a><a name="swr_02_0025_p145914135569"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.05429457054294%" headers="mcps1.2.4.1.3 "><p id="swr_02_0025_p1459151315617"><a name="swr_02_0025_p1459151315617"></a><a name="swr_02_0025_p1459151315617"></a>匹配规则，label、regexp</p>
    </td>
    </tr>
    <tr id="swr_02_0025_row85916136569"><td class="cellrowborder" valign="top" width="20.447955204479552%" headers="mcps1.2.4.1.1 "><p id="swr_02_0025_p1159121315618"><a name="swr_02_0025_p1159121315618"></a><a name="swr_02_0025_p1159121315618"></a>pattern</p>
    </td>
    <td class="cellrowborder" valign="top" width="22.4977502249775%" headers="mcps1.2.4.1.2 "><p id="swr_02_0025_p135911139566"><a name="swr_02_0025_p135911139566"></a><a name="swr_02_0025_p135911139566"></a>String</p>
    </td>
    <td class="cellrowborder" valign="top" width="57.05429457054294%" headers="mcps1.2.4.1.3 "><a name="swr_02_0025_ul1862081019469"></a><a name="swr_02_0025_ul1862081019469"></a><ul id="swr_02_0025_ul1862081019469"><li>kind是label时，该值为镜像版本</li><li>kind是regexp时，该值为正则表达式</li></ul>
    </td>
    </tr>
    </tbody>
    </table>

-   响应样例

    ```
    [
        {
            "algorithm": "or",
            "id": 1093,
            "rules": [
                {
                    "template": "date_rule",
                    "params": {
                        "days": "30"
                    },
                    "tag_selectors": [
                        {
                            "kind": "label",
                            "pattern": "v5"
                        },
                        {
                            "kind": "label",
                            "pattern": "1.0.1"
                        },
                        {
                            "kind": "regexp",
                            "pattern": "^123$"
                        }
                    ]
                }
            ],
            "scope": ""
        }
    ]
    ```


## 状态码<a name="s336c1dbc7af446a1b3cc077ea3f82fc9"></a>

<a name="t33d02fa79e8443868a71c99f411610a5"></a>
<table><thead align="left"><tr id="r9eb80d64e8f34d0db940daa95fc929dd"><th class="cellrowborder" valign="top" width="16.439999999999998%" id="mcps1.1.3.1.1"><p id="a7e51ed73a71e4dc29d0dd4aae3016632"><a name="a7e51ed73a71e4dc29d0dd4aae3016632"></a><a name="a7e51ed73a71e4dc29d0dd4aae3016632"></a>状态码</p>
</th>
<th class="cellrowborder" valign="top" width="83.56%" id="mcps1.1.3.1.2"><p id="aa802d02e21c944f1863435a0d11c7ec1"><a name="aa802d02e21c944f1863435a0d11c7ec1"></a><a name="aa802d02e21c944f1863435a0d11c7ec1"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="r1cc0192c651444db882dde750b14be23"><td class="cellrowborder" valign="top" width="16.439999999999998%" headers="mcps1.1.3.1.1 "><p id="a6a3639a3cb154e17b95c5076c8036471"><a name="a6a3639a3cb154e17b95c5076c8036471"></a><a name="a6a3639a3cb154e17b95c5076c8036471"></a>200</p>
</td>
<td class="cellrowborder" valign="top" width="83.56%" headers="mcps1.1.3.1.2 "><p id="ad54ae639e7f94380a87bfc10cc91a4f0"><a name="ad54ae639e7f94380a87bfc10cc91a4f0"></a><a name="ad54ae639e7f94380a87bfc10cc91a4f0"></a>请求成功</p>
</td>
</tr>
<tr id="r0bd68000afe546dd9c7a8d3a05991a04"><td class="cellrowborder" valign="top" width="16.439999999999998%" headers="mcps1.1.3.1.1 "><p id="ad46ccdc6b7e04df3b6b5679f7606f434"><a name="ad46ccdc6b7e04df3b6b5679f7606f434"></a><a name="ad46ccdc6b7e04df3b6b5679f7606f434"></a>400</p>
</td>
<td class="cellrowborder" valign="top" width="83.56%" headers="mcps1.1.3.1.2 "><p id="a1f2e8d58145d461781428d28f07a5351"><a name="a1f2e8d58145d461781428d28f07a5351"></a><a name="a1f2e8d58145d461781428d28f07a5351"></a>错误的请求</p>
</td>
</tr>
<tr id="row059261364320"><td class="cellrowborder" valign="top" width="16.439999999999998%" headers="mcps1.1.3.1.1 "><p id="p059261310438"><a name="p059261310438"></a><a name="p059261310438"></a>401</p>
</td>
<td class="cellrowborder" valign="top" width="83.56%" headers="mcps1.1.3.1.2 "><p id="p759261314433"><a name="p759261314433"></a><a name="p759261314433"></a>鉴权失败</p>
</td>
</tr>
<tr id="row9547111612437"><td class="cellrowborder" valign="top" width="16.439999999999998%" headers="mcps1.1.3.1.1 "><p id="p19547131615432"><a name="p19547131615432"></a><a name="p19547131615432"></a>404</p>
</td>
<td class="cellrowborder" valign="top" width="83.56%" headers="mcps1.1.3.1.2 "><p id="p16547416114315"><a name="p16547416114315"></a><a name="p16547416114315"></a>组织不存在</p>
</td>
</tr>
<tr id="r19bdef782c164c93917f897241e521f8"><td class="cellrowborder" valign="top" width="16.439999999999998%" headers="mcps1.1.3.1.1 "><p id="a7da68e311c0f4267bacf3cbdb71d1ead"><a name="a7da68e311c0f4267bacf3cbdb71d1ead"></a><a name="a7da68e311c0f4267bacf3cbdb71d1ead"></a>500</p>
</td>
<td class="cellrowborder" valign="top" width="83.56%" headers="mcps1.1.3.1.2 "><p id="aa6fd12cedd8841e29eeeca27c1bdea1a"><a name="aa6fd12cedd8841e29eeeca27c1bdea1a"></a><a name="aa6fd12cedd8841e29eeeca27c1bdea1a"></a>内部错误</p>
</td>
</tr>
</tbody>
</table>

